<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>[Go] Gophercon 2024 - Go Project Guide from A to Z | Ding's Coding Forge</title>
<meta name=keywords content="go,project guide,good practice"><meta name=description content="How to structure projects in Go, a language without rigid frameworks like Spring. This post introduces practical patterns for feature-driven development and enterprise-level application design."><meta name=author content="dingyu"><link rel=canonical href=https://dingyu.dev/en/posts/gopher-con-2024-go-project-guide/><meta name=google-site-verification content="8XY1hI6NVxQIrN7bQbnX-9TG9HHFw5HOQmlb6vcsFdQ"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.678f9035c217c5346e0b3de5bdc9ebac02c53b0502219858f8653d8d181c97b3.css integrity="sha256-Z4+QNcIXxTRuCz3lvcnrrALFOwUCIZhY+GU9jRgcl7M=" rel="preload stylesheet" as=style><link rel=icon href=https://dingyu.dev/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://dingyu.dev/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://dingyu.dev/favicon-32x32.png><link rel=apple-touch-icon href=https://dingyu.dev/apple-touch-icon.png><link rel=mask-icon href=https://dingyu.dev/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=ko href=https://dingyu.dev/posts/gopher-con-2024-go-project-guide/><link rel=alternate hreflang=en href=https://dingyu.dev/en/posts/gopher-con-2024-go-project-guide/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-XH8830R9KK"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-XH8830R9KK")}</script><meta property="og:url" content="https://dingyu.dev/en/posts/gopher-con-2024-go-project-guide/"><meta property="og:site_name" content="Ding's Coding Forge"><meta property="og:title" content="[Go] Gophercon 2024 - Go Project Guide from A to Z"><meta property="og:description" content="How to structure projects in Go, a language without rigid frameworks like Spring. This post introduces practical patterns for feature-driven development and enterprise-level application design."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-11-05T00:00:00+00:00"><meta property="article:modified_time" content="2024-11-05T00:00:00+00:00"><meta property="article:tag" content="Go"><meta property="article:tag" content="Project Guide"><meta property="article:tag" content="Good Practice"><meta property="og:image" content="https://dingyu.dev/en/posts/gopher-con-2024-go-project-guide/img/go-thumbnail.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://dingyu.dev/en/posts/gopher-con-2024-go-project-guide/img/go-thumbnail.png"><meta name=twitter:title content="[Go] Gophercon 2024 - Go Project Guide from A to Z"><meta name=twitter:description content="How to structure projects in Go, a language without rigid frameworks like Spring. This post introduces practical patterns for feature-driven development and enterprise-level application design."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://dingyu.dev/en/posts/"},{"@type":"ListItem","position":2,"name":"[Go] Gophercon 2024 - Go Project Guide from A to Z","item":"https://dingyu.dev/en/posts/gopher-con-2024-go-project-guide/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"[Go] Gophercon 2024 - Go Project Guide from A to Z","name":"[Go] Gophercon 2024 - Go Project Guide from A to Z","description":"How to structure projects in Go, a language without rigid frameworks like Spring. This post introduces practical patterns for feature-driven development and enterprise-level application design.","keywords":["go","project guide","good practice"],"articleBody":"[Go] Gophercon 2024 - Go Project Guide A-Z Small Projects Low traffic → Limited user base Simple functionality → Undefined user states in new services Need for rapid development → Early feature experimentation required for hypothesis validation For a Simple CLI Tool For a Simple API Server Take a minimalistic approach using standard libraries to build and expand APIs incrementally.\nFeature-Oriented Project Patterns Using Handler Struct (Class-based DI) Pass required parameters for each method via function inputs:\nInjecting Dependencies via HTTP HandlerFunc Use closures internally to capture dependencies. This design is clean, allows for scoped dependency injection, and is highly testable.\nType Advantages When to Use Handler - Easier management of complex state- Clearly structured dependencies- Easy to extend- Good for interface implementation- Helps organize complex logic Complex business logic, many dependencies, stateful apps HandlerFunc - Quick to write- Simple DI with closures- Functional composition- Ideal for prototyping- Easy mocking for testing Simple handlers, small apps, microservices Code Pattern for Enterprise-Scale Services Apply a Layered Architecture:\nLayer Breakdown Presenter = Converts between Domain Model and API Model Handler = Serves API Models Handles HTTP/gRPC requests and responses Clearly separates presentation from application logic Usecase = Executes business logic Depends on Services or Repositories Avoids using API or DB-specific models, focusing on domain logic (Service) = Implements complex business logic Extracted when Usecases become complex or involve multiple dependencies Usecases orchestrate; Services execute logic (similar to xxxExecutor pattern) Repository = Manages CRUD for domain models Encapsulates data access logic Inverts dependency: Repositories return domain models and depend on domain layer (Recorder) = Manages DB-specific models Used for handling NoSQL/RDBMS-specific logic Enables DB migrations by swapping out recorder DI Test Code per Layer Use the mocking library counterfeiter.\nFeature Go Mockery Counterfeiter Mock Creation Easy auto-generation with args Fake objects allow for advanced simulation Setup Ease Simple and intuitive Ideal for complex test scenarios Test Maintainability Best for simple interfaces Long-term test stability with fake objects Best Use Case Isolated module testing Complex logic and varied response scenarios Fake mocks are usually stored within the same layer they belong to.\nClosing Thoughts While Go’s ecosystem has experimented with many structural approaches, no clear standard has emerged. This pattern seems highly practical. Concern: Does a layered architecture cause unnecessary data structure conversions? (e.g., Presentation, Business, Data layers could each use separate structs for a single API) Service vs. Usecase? Seems to hinge on whether multiple services are involved. On APM: What about cost? → APM isn’t applied globally. It is only used for business-critical logic. ","wordCount":"422","inLanguage":"en","image":"https://dingyu.dev/en/posts/gopher-con-2024-go-project-guide/img/go-thumbnail.png","datePublished":"2024-11-05T00:00:00Z","dateModified":"2024-11-05T00:00:00Z","author":{"@type":"Person","name":"dingyu"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://dingyu.dev/en/posts/gopher-con-2024-go-project-guide/"},"publisher":{"@type":"Organization","name":"Ding's Coding Forge","logo":{"@type":"ImageObject","url":"https://dingyu.dev/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://dingyu.dev/en/ accesskey=h title="Ding's Coding Forge (Alt + H)"><img src=https://dingyu.dev/apple-touch-icon.png alt aria-label=logo height=35>Ding's Coding Forge</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
</button><span class=nav-separator>|</span><div class=lang-select-dropdown><button class=lang-select-dropdown-trigger aria-label=Translations type=button><svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 512 512" width="24" height="18"><path d="M478.33 433.6l-90-218a22 22 0 00-40.67.0l-90 218a22 22 0 1040.67 16.79L316.66 406h102.67l18.33 44.39A22 22 0 00458 464a22 22 0 0020.32-30.4zM334.83 362 368 281.65 401.17 362z" fill="currentcolor"/><path d="M267.84 342.92a22 22 0 00-4.89-30.7c-.2-.15-15-11.13-36.49-34.73 39.65-53.68 62.11-114.75 71.27-143.49H330a22 22 0 000-44H214V70a22 22 0 00-44 0v20H54a22 22 0 000 44h197.25c-9.52 26.95-27.05 69.5-53.79 108.36-31.41-41.68-43.08-68.65-43.17-68.87a22 22 0 00-40.58 17c.58 1.38 14.55 34.23 52.86 83.93.92 1.19 1.83 2.35 2.74 3.51-39.24 44.35-77.74 71.86-93.85 80.74a22 22 0 1021.07 38.63c2.16-1.18 48.6-26.89 101.63-85.59 22.52 24.08 38 35.44 38.93 36.1a22 22 0 0030.75-4.9z" fill="currentcolor"/></svg></button><div class=lang-select-dropdown-content><a lang=ko href=https://dingyu.dev/ title=한국어 aria-label=한국어>한국어</a></div></div></div></div><ul id=menu><li><a href=https://dingyu.dev/en/about/ title=About><span>About</span></a></li><li><a href=https://dingyu.dev/en/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://dingyu.dev/en/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://dingyu.dev/en/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://dingyu.dev/en/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://dingyu.dev/en/>Home</a>&nbsp;»&nbsp;<a href=https://dingyu.dev/en/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">[Go] Gophercon 2024 - Go Project Guide from A to Z</h1><div class=post-meta><span title='2024-11-05 00:00:00 +0000 UTC'>November 5, 2024</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;422 words&nbsp;·&nbsp;dingyu&nbsp;|&nbsp;Translations:<ul class=i18n_list><li><a href=https://dingyu.dev/posts/gopher-con-2024-go-project-guide/>Ko</a></li></ul>&nbsp;|&nbsp;<a href=https://github.com/dings-things/blog/tree/main/content/posts/gopher-con-2024-go-project-guide/index.en.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><figure class=entry-cover><img loading=eager src=https://dingyu.dev/img/go-thumbnail.png alt></figure><aside id=toc-container class="toc-container wide"><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#go-gophercon-2024---go-project-guide-a-z aria-label="[Go] Gophercon 2024 - Go Project Guide A-Z">[Go] Gophercon 2024 - Go Project Guide A-Z</a><ul><li><a href=#small-projects aria-label="Small Projects">Small Projects</a></li></ul></li><li><a href=#for-a-simple-cli-tool aria-label="For a Simple CLI Tool">For a Simple CLI Tool</a></li><li><a href=#for-a-simple-api-server aria-label="For a Simple API Server">For a Simple API Server</a></li><li><a href=#feature-oriented-project-patterns aria-label="Feature-Oriented Project Patterns">Feature-Oriented Project Patterns</a><ul><li><a href=#using-handler-struct-class-based-di aria-label="Using Handler Struct (Class-based DI)">Using Handler Struct (Class-based DI)</a></li><li><a href=#injecting-dependencies-via-http-handlerfunc aria-label="Injecting Dependencies via HTTP HandlerFunc">Injecting Dependencies via HTTP HandlerFunc</a></li></ul></li><li><a href=#code-pattern-for-enterprise-scale-services aria-label="Code Pattern for Enterprise-Scale Services">Code Pattern for Enterprise-Scale Services</a><ul><li><a href=#layer-breakdown aria-label="Layer Breakdown">Layer Breakdown</a></li></ul></li><li><a href=#test-code-per-layer aria-label="Test Code per Layer">Test Code per Layer</a></li><li><a href=#closing-thoughts aria-label="Closing Thoughts">Closing Thoughts</a></li></ul></div></details></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")})},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><h2 id=go-gophercon-2024---go-project-guide-a-z>[Go] Gophercon 2024 - Go Project Guide A-Z<a hidden class=anchor aria-hidden=true href=#go-gophercon-2024---go-project-guide-a-z>#</a></h2><h3 id=small-projects>Small Projects<a hidden class=anchor aria-hidden=true href=#small-projects>#</a></h3><ul><li>Low traffic → Limited user base</li><li>Simple functionality → Undefined user states in new services</li><li>Need for rapid development → Early feature experimentation required for hypothesis validation</li></ul><hr><h2 id=for-a-simple-cli-tool>For a Simple CLI Tool<a hidden class=anchor aria-hidden=true href=#for-a-simple-cli-tool>#</a></h2><p><img loading=lazy src=/posts/gopher-con-2024-go-project-guide/image.png></p><hr><h2 id=for-a-simple-api-server>For a Simple API Server<a hidden class=anchor aria-hidden=true href=#for-a-simple-api-server>#</a></h2><p>Take a minimalistic approach using standard libraries to build and expand APIs incrementally.</p><p><img loading=lazy src=/posts/gopher-con-2024-go-project-guide/image-1.png>
<img loading=lazy src=/posts/gopher-con-2024-go-project-guide/image-2.png></p><hr><h2 id=feature-oriented-project-patterns>Feature-Oriented Project Patterns<a hidden class=anchor aria-hidden=true href=#feature-oriented-project-patterns>#</a></h2><h3 id=using-handler-struct-class-based-di>Using Handler Struct (Class-based DI)<a hidden class=anchor aria-hidden=true href=#using-handler-struct-class-based-di>#</a></h3><p><img loading=lazy src=/posts/gopher-con-2024-go-project-guide/image-3.png></p><p>Pass required parameters for each method via function inputs:</p><p><img loading=lazy src=/posts/gopher-con-2024-go-project-guide/image-4.png></p><h3 id=injecting-dependencies-via-http-handlerfunc>Injecting Dependencies via HTTP HandlerFunc<a hidden class=anchor aria-hidden=true href=#injecting-dependencies-via-http-handlerfunc>#</a></h3><p><img loading=lazy src=/posts/gopher-con-2024-go-project-guide/image-5.png></p><p>Use closures internally to capture dependencies.
This design is clean, allows for scoped dependency injection, and is highly testable.</p><table><thead><tr><th>Type</th><th>Advantages</th><th>When to Use</th></tr></thead><tbody><tr><td>Handler</td><td>- Easier management of complex state- Clearly structured dependencies- Easy to extend- Good for interface implementation- Helps organize complex logic</td><td>Complex business logic, many dependencies, stateful apps</td></tr><tr><td>HandlerFunc</td><td>- Quick to write- Simple DI with closures- Functional composition- Ideal for prototyping- Easy mocking for testing</td><td>Simple handlers, small apps, microservices</td></tr></tbody></table><hr><h2 id=code-pattern-for-enterprise-scale-services>Code Pattern for Enterprise-Scale Services<a hidden class=anchor aria-hidden=true href=#code-pattern-for-enterprise-scale-services>#</a></h2><p><img loading=lazy src=/posts/gopher-con-2024-go-project-guide/image-6.png></p><p>Apply a Layered Architecture:</p><p><img loading=lazy src=/posts/gopher-con-2024-go-project-guide/image-7.png>
<img loading=lazy src=/posts/gopher-con-2024-go-project-guide/image-8.png></p><h3 id=layer-breakdown>Layer Breakdown<a hidden class=anchor aria-hidden=true href=#layer-breakdown>#</a></h3><ul><li><strong>Presenter</strong> = Converts between Domain Model and API Model</li><li><strong>Handler</strong> = Serves API Models<ul><li>Handles HTTP/gRPC requests and responses</li><li>Clearly separates presentation from application logic</li></ul></li><li><strong>Usecase</strong> = Executes business logic<ul><li>Depends on Services or Repositories</li><li>Avoids using API or DB-specific models, focusing on domain logic</li></ul></li><li><strong>(Service)</strong> = Implements complex business logic<ul><li>Extracted when Usecases become complex or involve multiple dependencies</li><li>Usecases orchestrate; Services execute logic (similar to <code>xxxExecutor</code> pattern)</li></ul></li><li><strong>Repository</strong> = Manages CRUD for domain models<ul><li>Encapsulates data access logic</li><li>Inverts dependency: Repositories return domain models and depend on domain layer</li></ul></li><li><strong>(Recorder)</strong> = Manages DB-specific models<ul><li>Used for handling NoSQL/RDBMS-specific logic</li><li>Enables DB migrations by swapping out recorder DI</li></ul></li></ul><hr><h2 id=test-code-per-layer>Test Code per Layer<a hidden class=anchor aria-hidden=true href=#test-code-per-layer>#</a></h2><p>Use the mocking library <strong>counterfeiter</strong>.</p><table><thead><tr><th>Feature</th><th>Go Mockery</th><th>Counterfeiter</th></tr></thead><tbody><tr><td>Mock Creation</td><td>Easy auto-generation with args</td><td>Fake objects allow for advanced simulation</td></tr><tr><td>Setup Ease</td><td>Simple and intuitive</td><td>Ideal for complex test scenarios</td></tr><tr><td>Test Maintainability</td><td>Best for simple interfaces</td><td>Long-term test stability with fake objects</td></tr><tr><td>Best Use Case</td><td>Isolated module testing</td><td>Complex logic and varied response scenarios</td></tr></tbody></table><p><img loading=lazy src=/posts/gopher-con-2024-go-project-guide/image-9.png></p><p>Fake mocks are usually stored within the same layer they belong to.</p><hr><h2 id=closing-thoughts>Closing Thoughts<a hidden class=anchor aria-hidden=true href=#closing-thoughts>#</a></h2><ul><li>While Go&rsquo;s ecosystem has experimented with many structural approaches, no clear standard has emerged. This pattern seems highly practical.</li><li>Concern: Does a layered architecture cause unnecessary data structure conversions? (e.g., Presentation, Business, Data layers could each use separate structs for a single API)</li><li>Service vs. Usecase? Seems to hinge on whether multiple services are involved.</li><li>On APM: What about cost? → APM isn&rsquo;t applied globally. It is only used for business-critical logic.</li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://dingyu.dev/en/tags/go/>Go</a></li><li><a href=https://dingyu.dev/en/tags/project-guide/>Project Guide</a></li><li><a href=https://dingyu.dev/en/tags/good-practice/>Good Practice</a></li></ul><nav class=paginav><a class=prev href=https://dingyu.dev/en/posts/gopher-con-2024-minimalistic-go/><span class=title>« Prev</span><br><span>[Go] Gophercon 2024 - Building Minimalistic Backend Microservice in Go</span>
</a><a class=next href=https://dingyu.dev/en/posts/gopher-con-2024-kubernetes-programing/><span class=title>Next »</span><br><span>[Go] Gophercon 2024 - Kubernetes Platform Programming</span></a></nav></footer><div id=giscus_thread><script src=https://giscus.app/client.js data-repo=dings-things/blog data-repo-id=R_kgDON9IuAw data-category=Announcements data-category-id=DIC_kwDON9IuA84CnTai data-mapping=og:title data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=preferred_color_scheme data-lang=en data-loading=lazy crossorigin=anonymous async></script></div></article></main><footer class=footer><span>&copy; 2025 <a href=https://dingyu.dev/en/>Ding's Coding Forge</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>
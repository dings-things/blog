<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>[Python] FastAPI Convention | Ding's Coding Forge</title>
<meta name=keywords content="python,convention"><meta name=description content="People tend to say FastAPI has no best practice. As a software developer working mainly in object-oriented languages, I propose a class-based FastAPI best practice."><meta name=author content="dingyu"><link rel=canonical href=https://dingyu.dev/posts/fastapi-convention/><meta name=google-site-verification content="8XY1hI6NVxQIrN7bQbnX-9TG9HHFw5HOQmlb6vcsFdQ"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.678f9035c217c5346e0b3de5bdc9ebac02c53b0502219858f8653d8d181c97b3.css integrity="sha256-Z4+QNcIXxTRuCz3lvcnrrALFOwUCIZhY+GU9jRgcl7M=" rel="preload stylesheet" as=style><link rel=icon href=https://dingyu.dev/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://dingyu.dev/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://dingyu.dev/favicon-32x32.png><link rel=apple-touch-icon href=https://dingyu.dev/apple-touch-icon.png><link rel=mask-icon href=https://dingyu.dev/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=ko href=https://dingyu.dev/ko/posts/fastapi-convention/><link rel=alternate hreflang=en href=https://dingyu.dev/posts/fastapi-convention/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-XH8830R9KK"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-XH8830R9KK")}</script><meta property="og:url" content="https://dingyu.dev/posts/fastapi-convention/"><meta property="og:site_name" content="Ding's Coding Forge"><meta property="og:title" content="[Python] FastAPI Convention"><meta property="og:description" content="People tend to say FastAPI has no best practice. As a software developer working mainly in object-oriented languages, I propose a class-based FastAPI best practice."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-06-22T00:00:00+00:00"><meta property="article:modified_time" content="2023-06-22T00:00:00+00:00"><meta property="article:tag" content="Python"><meta property="article:tag" content="Convention"><meta property="og:image" content="https://dingyu.dev/posts/fastapi-convention/img/fastapi.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://dingyu.dev/posts/fastapi-convention/img/fastapi.png"><meta name=twitter:title content="[Python] FastAPI Convention"><meta name=twitter:description content="People tend to say FastAPI has no best practice. As a software developer working mainly in object-oriented languages, I propose a class-based FastAPI best practice."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://dingyu.dev/posts/"},{"@type":"ListItem","position":2,"name":"[Python] FastAPI Convention","item":"https://dingyu.dev/posts/fastapi-convention/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"[Python] FastAPI Convention","name":"[Python] FastAPI Convention","description":"People tend to say FastAPI has no best practice. As a software developer working mainly in object-oriented languages, I propose a class-based FastAPI best practice.","keywords":["python","convention"],"articleBody":"About FastAPI Convention What is FastAPI? Advantages of FastAPI Dependency Injection Automatic Documentation Asynchronous Support Pydantic Model With the rise of cloud services, MSA (Microservice Architecture) has gained attention, leading to changes in server ecosystems. Now, stateless architectures using lightweight RESTful APIs have become mainstream, and FastAPI is optimized for such small, modular services.\nDependency: (If A must run after B, they are dependent) Depends is the core function that lowers coupling for tasks like authentication and DB connections. Auto Documentation: Documentation often feels like homework to developers. Unlike other frameworks, FastAPI automatically generates ReDoc and OpenAPI docs without additional dependencies, increasing developer productivity. Async Support: While Python is synchronous by default and its GIL (Global Interpreter Lock) discourages threading, FastAPI supports async operations out of the box. Pydantic: FastAPI loves Pydantic. It provides great features like serialization, type validation, and path variable parsing. Characteristics The biggest issue is the lack of a de facto standard. Unlike long-standing frameworks, FastAPI is relatively young and emphasizes flexibility and lightweight design, which naturally results in the absence of a consistent coding standard. While this freedom can be positive, it may also be seen as a lack of structure.\nPurpose Due to the absence of class-based structures and consistent design patterns, collaboration within teams often feels chaotic, even among teammates. The goal is to establish our own convention to ensure intuitive and maintainable project architecture.\nClass-Based Convention Current Issues Utility-dependent methods that lack structure Classes take on too many responsibilities (low cohesion) Non-intuitive structure Business logic is scattered, making code hard to read No consistent convention for Dataclass, Pydantic Models, etc. Requirements Project structure must be consistent and intuitive Each class should have a single responsibility Organize packages by business layer Convention Based on Requirements 1. Consistent and Intuitive Project Structure [FastAPI’s Suggested Project Structure]\n. ├── app │ ├── __init__.py │ ├── main.py │ ├── dependencies.py │ └── routers │ │ ├── __init__.py │ │ ├── items.py │ │ └── users.py │ └── internal │ ├── __init__.py │ └── admin.py [Proposed Project Structure]\nfastapi-project ├── app │ ├── worker │ │ ├── enums.py │ │ ├── models.py │ │ ├── dependencies.py │ │ ├── constants.py │ │ ├── exceptions.py │ │ └── utils.py │ ├── configs │ │ ├── config.py │ │ └── log_config.py │ ├── models.py │ ├── utils.py │ ├── exceptions.py │ ├── database.py │ └── main.py ├── aws │ ├── client.py │ ├── models.py │ ├── constants.py │ ├── exceptions.py │ └── utils.py ├── tests/ │ ├── domain │ └── aws ├── templates/ │ └── index.html ├── requirements │ ├── dev.txt │ ├── stg.txt │ └── prod.txt ├── .env └── .gitignore The root of all domain directories is app.\nmain.py initializes the FastAPI app (like src/ in other projects) controller: Module endpoints enums: Enum definitions models: Pydantic models entities: Entity models service: Business logic dependencies: Validation and injection logic constants: Internal constants config: Configuration files exceptions: Custom exceptions If multiple methods share similar concerns, group them into a dedicated package.\nExternal packages are maintained outside the app directory since they aren’t app-dependent.\n2. Each Class Should Have a Single Responsibility The author previously misunderstood cohesion. Grouping many methods with related but broad concerns into one class does not improve cohesion—it dilutes it.\nThis follows the SRP (Single Responsibility Principle) from SOLID design.\nCommon examples of so-called “GOD” classes include: XXXService, XXXClient, XXXHandler, XXXWorker\nEven I fell into this trap, grouping anything remotely related under one service. But this leads to poor readability and becomes a nightmare during unit testing.\nFor example:\nImplement a feature to write user logs into a txt file\n[Bad Example]\nclass UserService: def write_log_file(self, user_id: str) -\u003e None [SRP Applied]\nclass UserLogWriter: def __init__(self, user: User): self.user = user def write(self) -\u003e None While this is a simplified example, when services accumulate various unrelated features, it hurts readability and maintainability.\nTo be more Pythonic and adhere to OOP principles, I also refactored the router to be class-based.\nIt might seem unnecessary, but I aimed to manage controllers as containers using inheritance to reduce boilerplate.\nExample: [BaseController] [HelloController] 3. Organize by Business Layer If you’re building a CRUD app for a User domain, the structure might look like:\nfastapi-project ├── app │ ├── user_manager │ │ ├── user_getter.py │ │ ├── user_updater.py │ │ ├── user_creator.py │ │ ├── enums.py │ │ ├── models.py │ │ ├── entities.py │ │ ├── user_database.py │ │ ├── dependencies.py │ │ ├── constants.py │ │ ├── exceptions.py │ │ └── utils.py Want to retrieve a User entity from the DB? Just use UserGetter.get()—clean and predictable.\nEven if you later add a Manager layer using the Facade pattern, this structure still holds.\nWhat if model class names collide? Yes, of course. Entity and DTO classes often share names, so we separate them using namespaces:\nimport app.user_manager.entities as entity import app.user_manager.models as dto user_dto = dto.User user_entity = entity.User Design is more important than implementation. Even at the implementation level, clear conventions allow consistent class, sequence, and module diagrams to be built.\nThis convention isn’t a universal truth. But it’s a solid example of how one could be done.\n","wordCount":"858","inLanguage":"en","image":"https://dingyu.dev/posts/fastapi-convention/img/fastapi.png","datePublished":"2023-06-22T00:00:00Z","dateModified":"2023-06-22T00:00:00Z","author":{"@type":"Person","name":"dingyu"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://dingyu.dev/posts/fastapi-convention/"},"publisher":{"@type":"Organization","name":"Ding's Coding Forge","logo":{"@type":"ImageObject","url":"https://dingyu.dev/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://dingyu.dev/ accesskey=h title="Ding's Coding Forge (Alt + H)"><img src=https://dingyu.dev/apple-touch-icon.png alt aria-label=logo height=35>Ding's Coding Forge</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
</button><span class=nav-separator>|</span><div class=lang-select-dropdown><button class=lang-select-dropdown-trigger aria-label=Translations type=button><svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 512 512" width="24" height="18"><path d="M478.33 433.6l-90-218a22 22 0 00-40.67.0l-90 218a22 22 0 1040.67 16.79L316.66 406h102.67l18.33 44.39A22 22 0 00458 464a22 22 0 0020.32-30.4zM334.83 362 368 281.65 401.17 362z" fill="currentcolor"/><path d="M267.84 342.92a22 22 0 00-4.89-30.7c-.2-.15-15-11.13-36.49-34.73 39.65-53.68 62.11-114.75 71.27-143.49H330a22 22 0 000-44H214V70a22 22 0 00-44 0v20H54a22 22 0 000 44h197.25c-9.52 26.95-27.05 69.5-53.79 108.36-31.41-41.68-43.08-68.65-43.17-68.87a22 22 0 00-40.58 17c.58 1.38 14.55 34.23 52.86 83.93.92 1.19 1.83 2.35 2.74 3.51-39.24 44.35-77.74 71.86-93.85 80.74a22 22 0 1021.07 38.63c2.16-1.18 48.6-26.89 101.63-85.59 22.52 24.08 38 35.44 38.93 36.1a22 22 0 0030.75-4.9z" fill="currentcolor"/></svg></button><div class=lang-select-dropdown-content><a lang=ko href=https://dingyu.dev/ko/ title=한국어 aria-label=한국어>한국어</a></div></div></div></div><ul id=menu><li><a href=https://dingyu.dev/en/about/ title=About><span>About</span></a></li><li><a href=https://dingyu.dev/en/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://dingyu.dev/en/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://dingyu.dev/en/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://dingyu.dev/en/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://dingyu.dev/>Home</a>&nbsp;»&nbsp;<a href=https://dingyu.dev/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">[Python] FastAPI Convention</h1><div class=post-description>People tend to say FastAPI has no best practice. As a software developer working mainly in object-oriented languages, I propose a class-based FastAPI best practice.</div><div class=post-meta><span title='2023-06-22 00:00:00 +0000 UTC'>June 22, 2023</span>&nbsp;·&nbsp;5 min&nbsp;·&nbsp;858 words&nbsp;·&nbsp;dingyu&nbsp;|&nbsp;Translations:<ul class=i18n_list><li><a href=https://dingyu.dev/ko/posts/fastapi-convention/>Ko</a></li></ul>&nbsp;|&nbsp;<a href=https://github.com/dings-things/blog/tree/main/content/posts/fastapi-convention/index.en.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><figure class=entry-cover><img loading=eager src=https://dingyu.dev/img/fastapi.png alt></figure><aside id=toc-container class="toc-container wide"><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#about-fastapi-convention aria-label="About FastAPI Convention">About FastAPI Convention</a><ul><li><a href=#what-is-fastapi aria-label="What is FastAPI?">What is FastAPI?</a></li><li><a href=#advantages-of-fastapi aria-label="Advantages of FastAPI">Advantages of FastAPI</a></li><li><a href=#characteristics aria-label=Characteristics>Characteristics</a></li><li><a href=#purpose aria-label=Purpose>Purpose</a></li></ul></li><li><a href=#class-based-convention aria-label="Class-Based Convention">Class-Based Convention</a><ul><li><a href=#current-issues aria-label="Current Issues">Current Issues</a></li><li><a href=#requirements aria-label=Requirements>Requirements</a></li><li><a href=#convention-based-on-requirements aria-label="Convention Based on Requirements">Convention Based on Requirements</a><ul><li><a href=#1-consistent-and-intuitive-project-structure aria-label="1. Consistent and Intuitive Project Structure">1. Consistent and Intuitive Project Structure</a></li><li><a href=#2-each-class-should-have-a-single-responsibility aria-label="2. Each Class Should Have a Single Responsibility">2. Each Class Should Have a Single Responsibility</a></li><li><a href=#3-organize-by-business-layer aria-label="3. Organize by Business Layer">3. Organize by Business Layer</a></li></ul></li></ul></li></ul></div></details></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")})},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><h1 id=about-fastapi-convention>About FastAPI Convention<a hidden class=anchor aria-hidden=true href=#about-fastapi-convention>#</a></h1><h2 id=what-is-fastapi>What is FastAPI?<a hidden class=anchor aria-hidden=true href=#what-is-fastapi>#</a></h2><p><img loading=lazy src=/posts/fastapi-convention/fastapi-graph.png></p><h2 id=advantages-of-fastapi>Advantages of FastAPI<a hidden class=anchor aria-hidden=true href=#advantages-of-fastapi>#</a></h2><ul><li>Dependency Injection</li><li>Automatic Documentation</li><li>Asynchronous Support</li><li>Pydantic Model</li></ul><p>With the rise of cloud services, MSA (Microservice Architecture) has gained attention, leading to changes in server ecosystems. Now, stateless architectures using lightweight RESTful APIs have become mainstream, and FastAPI is optimized for such small, modular services.</p><ul><li><strong>Dependency</strong>: (If A must run after B, they are dependent) <code>Depends</code> is the core function that lowers coupling for tasks like authentication and DB connections.</li><li><strong>Auto Documentation</strong>: Documentation often feels like homework to developers. Unlike other frameworks, FastAPI automatically generates ReDoc and OpenAPI docs without additional dependencies, increasing developer productivity.</li><li><strong>Async Support</strong>: While Python is synchronous by default and its GIL (Global Interpreter Lock) discourages threading, FastAPI supports async operations out of the box.</li><li><strong>Pydantic</strong>: FastAPI loves Pydantic. It provides great features like serialization, type validation, and path variable parsing.</li></ul><h2 id=characteristics>Characteristics<a hidden class=anchor aria-hidden=true href=#characteristics>#</a></h2><p><img loading=lazy src=/posts/fastapi-convention/image.png></p><p>The biggest issue is the lack of a de facto standard. Unlike long-standing frameworks, FastAPI is relatively young and emphasizes flexibility and lightweight design, which naturally results in the absence of a consistent coding standard. While this freedom can be positive, it may also be seen as a lack of structure.</p><hr><h2 id=purpose>Purpose<a hidden class=anchor aria-hidden=true href=#purpose>#</a></h2><p>Due to the absence of class-based structures and consistent design patterns, collaboration within teams often feels chaotic, even among teammates. The goal is to establish our own convention to ensure intuitive and maintainable project architecture.</p><hr><h1 id=class-based-convention>Class-Based Convention<a hidden class=anchor aria-hidden=true href=#class-based-convention>#</a></h1><h2 id=current-issues>Current Issues<a hidden class=anchor aria-hidden=true href=#current-issues>#</a></h2><ol><li>Utility-dependent methods that lack structure<ul><li>Classes take on too many responsibilities (<strong>low cohesion</strong>)</li></ul></li><li>Non-intuitive structure<ul><li>Business logic is scattered, making code hard to read</li></ul></li><li>No consistent convention for Dataclass, Pydantic Models, etc.</li></ol><hr><h2 id=requirements>Requirements<a hidden class=anchor aria-hidden=true href=#requirements>#</a></h2><ol><li>Project structure must be consistent and intuitive</li><li>Each class should have a single responsibility</li><li>Organize packages by business layer</li></ol><hr><h2 id=convention-based-on-requirements>Convention Based on Requirements<a hidden class=anchor aria-hidden=true href=#convention-based-on-requirements>#</a></h2><h3 id=1-consistent-and-intuitive-project-structure>1. Consistent and Intuitive Project Structure<a hidden class=anchor aria-hidden=true href=#1-consistent-and-intuitive-project-structure>#</a></h3><p>[FastAPI&rsquo;s Suggested Project Structure]</p><pre tabindex=0><code>.
├── app
│   ├── __init__.py
│   ├── main.py
│   ├── dependencies.py
│   └── routers
│   │   ├── __init__.py
│   │   ├── items.py
│   │   └── users.py
│   └── internal
│       ├── __init__.py
│       └── admin.py
</code></pre><p>[Proposed Project Structure]</p><pre tabindex=0><code>fastapi-project
├── app
│   ├── worker
│   │   ├── enums.py
│   │   ├── models.py
│   │   ├── dependencies.py
│   │   ├── constants.py
│   │   ├── exceptions.py
│   │   └── utils.py
│   ├── configs
│   │   ├── config.py
│   │   └── log_config.py
│   ├── models.py
│   ├── utils.py
│   ├── exceptions.py
│   ├── database.py
│   └── main.py
├── aws
│   ├── client.py
│   ├── models.py
│   ├── constants.py
│   ├── exceptions.py
│   └── utils.py
├── tests/
│   ├── domain
│   └── aws
├── templates/
│   └── index.html
├── requirements
│   ├── dev.txt
│   ├── stg.txt
│   └── prod.txt
├── .env
└── .gitignore
</code></pre><ul><li><p>The root of all domain directories is <code>app</code>.</p><ul><li><code>main.py</code> initializes the FastAPI app (like <code>src/</code> in other projects)</li><li><code>controller</code>: Module endpoints</li><li><code>enums</code>: Enum definitions</li><li><code>models</code>: Pydantic models</li><li><code>entities</code>: Entity models</li><li><code>service</code>: Business logic</li><li><code>dependencies</code>: Validation and injection logic</li><li><code>constants</code>: Internal constants</li><li><code>config</code>: Configuration files</li><li><code>exceptions</code>: Custom exceptions</li></ul></li><li><p>If multiple methods share similar concerns, group them into a dedicated package.</p></li><li><p>External packages are maintained outside the <code>app</code> directory since they aren&rsquo;t app-dependent.</p></li></ul><hr><h3 id=2-each-class-should-have-a-single-responsibility>2. Each Class Should Have a Single Responsibility<a hidden class=anchor aria-hidden=true href=#2-each-class-should-have-a-single-responsibility>#</a></h3><p>The author previously misunderstood cohesion. Grouping many methods with related but broad concerns into one class does not improve cohesion—it dilutes it.</p><p>This follows the SRP (Single Responsibility Principle) from SOLID design.</p><p>Common examples of so-called &ldquo;GOD&rdquo; classes include:
<code>XXXService</code>, <code>XXXClient</code>, <code>XXXHandler</code>, <code>XXXWorker</code></p><p>Even I fell into this trap, grouping anything remotely related under one service. But this leads to poor readability and becomes a nightmare during unit testing.</p><p>For example:</p><blockquote><p>Implement a feature to write user logs into a txt file</p></blockquote><p>[Bad Example]</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>UserService</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>write_log_file</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>user_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span>
</span></span></code></pre></div><p>[SRP Applied]</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>UserLogWriter</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>user</span><span class=p>:</span> <span class=n>User</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>user</span> <span class=o>=</span> <span class=n>user</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>write</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span>
</span></span></code></pre></div><p>While this is a simplified example, when services accumulate various unrelated features, it hurts readability and maintainability.</p><p>To be more <code>Pythonic</code> and adhere to <code>OOP</code> principles, I also refactored the router to be class-based.</p><p>It might seem unnecessary, but I aimed to manage controllers as containers using inheritance to reduce boilerplate.</p><blockquote><p>Example:
[BaseController]
<img loading=lazy src=https://velog.velcdn.com/images/wjddn3711/post/4d9c36e2-df6e-4a05-907f-560c32867a79/image.png></p></blockquote><p>[HelloController]
<img loading=lazy src=https://velog.velcdn.com/images/wjddn3711/post/b145dc9d-cd1d-4738-a37d-d49b4eb96282/image.png></p><hr><h3 id=3-organize-by-business-layer>3. Organize by Business Layer<a hidden class=anchor aria-hidden=true href=#3-organize-by-business-layer>#</a></h3><p>If you’re building a CRUD app for a <code>User</code> domain, the structure might look like:</p><pre tabindex=0><code>fastapi-project
├── app
│   ├── user_manager
│   │   ├── user_getter.py
│   │   ├── user_updater.py
│   │   ├── user_creator.py
│   │   ├── enums.py
│   │   ├── models.py
│   │   ├── entities.py
│   │   ├── user_database.py
│   │   ├── dependencies.py
│   │   ├── constants.py
│   │   ├── exceptions.py
│   │   └── utils.py
</code></pre><p>Want to retrieve a User entity from the DB? Just use <code>UserGetter.get()</code>—clean and predictable.</p><p>Even if you later add a <code>Manager</code> layer using the Facade pattern, this structure still holds.</p><blockquote><p><em>What if model class names collide?</em>
Yes, of course.
Entity and DTO classes often share names, so we separate them using namespaces:</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>app.user_manager.entities</span> <span class=k>as</span> <span class=nn>entity</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>app.user_manager.models</span> <span class=k>as</span> <span class=nn>dto</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>user_dto</span> <span class=o>=</span> <span class=n>dto</span><span class=o>.</span><span class=n>User</span>
</span></span><span class=line><span class=cl><span class=n>user_entity</span> <span class=o>=</span> <span class=n>entity</span><span class=o>.</span><span class=n>User</span>
</span></span></code></pre></div><hr><p><strong>Design is more important than implementation.</strong>
Even at the implementation level, clear conventions allow consistent class, sequence, and module diagrams to be built.</p><p>This convention isn&rsquo;t a universal truth.
But it&rsquo;s a solid example of how one could be done.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://dingyu.dev/tags/python/>Python</a></li><li><a href=https://dingyu.dev/tags/convention/>Convention</a></li></ul><nav class=paginav><a class=prev href=https://dingyu.dev/posts/redis-transaction/><span class=title>« Prev</span><br><span>[DB] Redis Transaction</span>
</a><a class=next href=https://dingyu.dev/posts/crawling-selenium-solver/><span class=title>Next »</span><br><span>[Crawler] Recaptcha Solver</span></a></nav></footer><div id=giscus_thread><script src=https://giscus.app/client.js data-repo=dings-things/blog data-repo-id=R_kgDON9IuAw data-category=Announcements data-category-id=DIC_kwDON9IuA84CnTai data-mapping=og:title data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=preferred_color_scheme data-lang=ko data-loading=lazy crossorigin=anonymous async></script></div></article></main><footer class=footer><span>&copy; 2025 <a href=https://dingyu.dev/>Ding's Coding Forge</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>
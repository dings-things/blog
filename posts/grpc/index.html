<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>[Protocol] Exploring RPC... and GRPC in Depth | Ding's Coding Forge</title>
<meta name=keywords content="grpc,rpc,protobuf,HTTP2.0"><meta name=description content='When we hear "RPC communication," many (maybe just me?) might immediately think of Protocol Buffers over HTTP/2 — in other words, gRPC. But what is RPC really, and why is gRPC considered fast? And when should we use it?'><meta name=author content="dingyu"><link rel=canonical href=https://dingyu.dev/posts/grpc/><meta name=google-site-verification content="8XY1hI6NVxQIrN7bQbnX-9TG9HHFw5HOQmlb6vcsFdQ"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.678f9035c217c5346e0b3de5bdc9ebac02c53b0502219858f8653d8d181c97b3.css integrity="sha256-Z4+QNcIXxTRuCz3lvcnrrALFOwUCIZhY+GU9jRgcl7M=" rel="preload stylesheet" as=style><link rel=icon href=https://dingyu.dev/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://dingyu.dev/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://dingyu.dev/favicon-32x32.png><link rel=apple-touch-icon href=https://dingyu.dev/apple-touch-icon.png><link rel=mask-icon href=https://dingyu.dev/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=ko href=https://dingyu.dev/ko/posts/grpc/><link rel=alternate hreflang=en href=https://dingyu.dev/posts/grpc/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-XH8830R9KK"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-XH8830R9KK")}</script><meta property="og:url" content="https://dingyu.dev/posts/grpc/"><meta property="og:site_name" content="Ding's Coding Forge"><meta property="og:title" content="[Protocol] Exploring RPC... and GRPC in Depth"><meta property="og:description" content='When we hear "RPC communication," many (maybe just me?) might immediately think of Protocol Buffers over HTTP/2 — in other words, gRPC. But what is RPC really, and why is gRPC considered fast? And when should we use it?'><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-02-06T00:00:00+00:00"><meta property="article:modified_time" content="2025-02-06T00:00:00+00:00"><meta property="article:tag" content="Grpc"><meta property="article:tag" content="Rpc"><meta property="article:tag" content="Protobuf"><meta property="article:tag" content="HTTP2.0"><meta property="og:image" content="https://dingyu.dev/posts/grpc/img/grpc.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://dingyu.dev/posts/grpc/img/grpc.png"><meta name=twitter:title content="[Protocol] Exploring RPC... and GRPC in Depth"><meta name=twitter:description content='When we hear "RPC communication," many (maybe just me?) might immediately think of Protocol Buffers over HTTP/2 — in other words, gRPC. But what is RPC really, and why is gRPC considered fast? And when should we use it?'><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://dingyu.dev/posts/"},{"@type":"ListItem","position":2,"name":"[Protocol] Exploring RPC... and GRPC in Depth","item":"https://dingyu.dev/posts/grpc/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"[Protocol] Exploring RPC... and GRPC in Depth","name":"[Protocol] Exploring RPC... and GRPC in Depth","description":"When we hear \"RPC communication,\" many (maybe just me?) might immediately think of Protocol Buffers over HTTP/2 — in other words, gRPC. But what is RPC really, and why is gRPC considered fast? And when should we use it?","keywords":["grpc","rpc","protobuf","HTTP2.0"],"articleBody":"What is RPC? RPC stands for Remote Procedure Call. It’s an inter-process communication technology that allows functions or procedures to run in another address space without requiring separate remote control logic.\nIn essence, RPC abstracts the underlying connection and data transfer so that developers can invoke remote functions as if they were local.\nIn distributed services (especially MSA), RPC is commonly used for communication between clients and servers or between servers.\nAs applications are split into microservices, the days of simply calling functions locally in a monolith are gone. Now, services must communicate over the network.\nNetwork latency becomes the bottleneck, not your optimized code.\nHow RPC Works Define the interface using IDL (Interface Definition Language). The IDL definition is used to generate client stubs and server skeletons via a compiler (rpcgen). The client calls a stub method which marshals parameters. The stub sends the request in a form the server can understand. The server receives the call and executes the logic. The server sends back the response. Stub?\nA stub is an abstraction layer that lets clients call remote methods as if they were local. It handles marshaling/unmarshaling and networking logic internally.\nWhat is gRPC? gRPC is a modern RPC framework developed by Google. It uses Protocol Buffers for IDL and message serialization/deserialization. Clients can call server methods on remote machines as if they were local. RPC != gRPC. gRPC is a specific implementation of RPC, using HTTP/2 and Protocol Buffers internally.\nHTTP/1.1 vs HTTP/2 HTTP/1.1 Flow TCP handshake Request/response TCP termination Even with Keep-Alive, HTTP/1.1 can only handle one request per connection (sequentially).\nProblems Overhead from many TCP connections HOL Blocking: one slow request blocks the rest HTTP/2 Improvements Proxy + Keep-Alive Problems Proxies may drop Keep-Alive connections without notifying clients. Clients think the connection is still valid, leading to errors. HTTP/2 Fixes Servers send GOAWAY frames to indicate shutdown Proxies send PING to verify liveness Clients reconnect when needed Multiplexing Multiple requests over a single TCP connection Requests are independent and don’t block each other No More HOL Blocking Advantages and Disadvantages of gRPC Feature Pros Cons Performance Multiplexing, header compression, streaming Requires HTTP/2 support IDL Strong typing with .proto files ProtoBuf is not human-readable Communication Unary, Server/Client Streaming, Bidirectional Complex to debug Language Support Multi-language support (Go, Java, Python, etc.) Varies in maturity Code Generation Auto-generates stubs from .proto Requires additional build tooling Security Strong TLS support TLS setup can be tricky Load Balancing Client-side support available Typically used with Envoy or other proxies Streaming Built-in streaming APIs Harder to implement and maintain Transport Binary serialization = compact, fast Not easily debuggable like REST Browser Supported via gRPC-Web Requires gRPC-Web proxy layer More on gRPC performance, debugging, and implementation tips coming next.\n","wordCount":"456","inLanguage":"en","image":"https://dingyu.dev/posts/grpc/img/grpc.png","datePublished":"2025-02-06T00:00:00Z","dateModified":"2025-02-06T00:00:00Z","author":{"@type":"Person","name":"dingyu"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://dingyu.dev/posts/grpc/"},"publisher":{"@type":"Organization","name":"Ding's Coding Forge","logo":{"@type":"ImageObject","url":"https://dingyu.dev/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://dingyu.dev/ accesskey=h title="Ding's Coding Forge (Alt + H)"><img src=https://dingyu.dev/apple-touch-icon.png alt aria-label=logo height=35>Ding's Coding Forge</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
</button><span class=nav-separator>|</span><div class=lang-select-dropdown><button class=lang-select-dropdown-trigger aria-label=Translations type=button><svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 512 512" width="24" height="18"><path d="M478.33 433.6l-90-218a22 22 0 00-40.67.0l-90 218a22 22 0 1040.67 16.79L316.66 406h102.67l18.33 44.39A22 22 0 00458 464a22 22 0 0020.32-30.4zM334.83 362 368 281.65 401.17 362z" fill="currentcolor"/><path d="M267.84 342.92a22 22 0 00-4.89-30.7c-.2-.15-15-11.13-36.49-34.73 39.65-53.68 62.11-114.75 71.27-143.49H330a22 22 0 000-44H214V70a22 22 0 00-44 0v20H54a22 22 0 000 44h197.25c-9.52 26.95-27.05 69.5-53.79 108.36-31.41-41.68-43.08-68.65-43.17-68.87a22 22 0 00-40.58 17c.58 1.38 14.55 34.23 52.86 83.93.92 1.19 1.83 2.35 2.74 3.51-39.24 44.35-77.74 71.86-93.85 80.74a22 22 0 1021.07 38.63c2.16-1.18 48.6-26.89 101.63-85.59 22.52 24.08 38 35.44 38.93 36.1a22 22 0 0030.75-4.9z" fill="currentcolor"/></svg></button><div class=lang-select-dropdown-content><a lang=ko href=https://dingyu.dev/ko/ title=한국어 aria-label=한국어>한국어</a></div></div></div></div><ul id=menu><li><a href=https://dingyu.dev/en/about/ title=About><span>About</span></a></li><li><a href=https://dingyu.dev/en/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://dingyu.dev/en/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://dingyu.dev/en/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://dingyu.dev/en/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://dingyu.dev/>Home</a>&nbsp;»&nbsp;<a href=https://dingyu.dev/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">[Protocol] Exploring RPC... and GRPC in Depth</h1><div class=post-description>When we hear "RPC communication," many (maybe just me?) might immediately think of Protocol Buffers over HTTP/2 — in other words, gRPC. But what is RPC really, and why is gRPC considered fast? And when should we use it?</div><div class=post-meta><span title='2025-02-06 00:00:00 +0000 UTC'>February 6, 2025</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;456 words&nbsp;·&nbsp;dingyu&nbsp;|&nbsp;Translations:<ul class=i18n_list><li><a href=https://dingyu.dev/ko/posts/grpc/>Ko</a></li></ul>&nbsp;|&nbsp;<a href=https://github.com/dings-things/blog/tree/main/content/posts/grpc/index.en.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><figure class=entry-cover><img loading=eager src=https://dingyu.dev/img/grpc.png alt></figure><aside id=toc-container class="toc-container wide"><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><ul><li><a href=#what-is-rpc aria-label="What is RPC?">What is RPC?</a></li><li><a href=#how-rpc-works aria-label="How RPC Works">How RPC Works</a></li></ul><li><a href=#what-is-grpc aria-label="What is gRPC?">What is gRPC?</a></li><li><a href=#http11-vs-http2 aria-label="HTTP/1.1 vs HTTP/2">HTTP/1.1 vs HTTP/2</a><ul><li><a href=#http11-flow aria-label="HTTP/1.1 Flow">HTTP/1.1 Flow</a><ul><li><a href=#problems aria-label=Problems>Problems</a></li></ul></li><li><a href=#http2-improvements aria-label="HTTP/2 Improvements">HTTP/2 Improvements</a><ul><li><a href=#proxy--keep-alive-problems aria-label="Proxy + Keep-Alive Problems">Proxy + Keep-Alive Problems</a></li><li><a href=#http2-fixes aria-label="HTTP/2 Fixes">HTTP/2 Fixes</a></li><li><a href=#multiplexing aria-label=Multiplexing>Multiplexing</a></li><li><a href=#no-more-hol-blocking aria-label="No More HOL Blocking">No More HOL Blocking</a></li></ul></li></ul></li><li><a href=#advantages-and-disadvantages-of-grpc aria-label="Advantages and Disadvantages of gRPC">Advantages and Disadvantages of gRPC</a></li></ul></div></details></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")})},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><h3 id=what-is-rpc>What is RPC?<a hidden class=anchor aria-hidden=true href=#what-is-rpc>#</a></h3><p>RPC stands for <strong>Remote Procedure Call</strong>. It&rsquo;s an inter-process communication technology that allows functions or procedures to run in another address space without requiring separate remote control logic.</p><p>In essence, RPC abstracts the underlying connection and data transfer so that developers can invoke remote functions as if they were local.</p><blockquote><p>In distributed services (especially MSA), RPC is commonly used for communication between clients and servers or between servers.</p></blockquote><p>As applications are split into microservices, the days of simply calling functions locally in a monolith are gone. Now, services must communicate over the network.</p><p><img loading=lazy src=/posts/grpc/network-io-latency.png></p><p><strong>Network latency becomes the bottleneck</strong>, not your optimized code.</p><hr><h3 id=how-rpc-works>How RPC Works<a hidden class=anchor aria-hidden=true href=#how-rpc-works>#</a></h3><p><img loading=lazy src=/posts/grpc/rpc.png></p><ol><li>Define the interface using IDL (Interface Definition Language).</li><li>The IDL definition is used to generate client stubs and server skeletons via a compiler (<code>rpcgen</code>).</li><li>The client calls a stub method which marshals parameters.</li><li>The stub sends the request in a form the server can understand.</li><li>The server receives the call and executes the logic.</li><li>The server sends back the response.</li></ol><blockquote><p><strong>Stub?</strong></p><p>A stub is an abstraction layer that lets clients call remote methods as if they were local. It handles marshaling/unmarshaling and networking logic internally.</p></blockquote><hr><h2 id=what-is-grpc>What is gRPC?<a hidden class=anchor aria-hidden=true href=#what-is-grpc>#</a></h2><ul><li>gRPC is a modern RPC framework developed by Google.</li><li>It uses <strong>Protocol Buffers</strong> for IDL and message serialization/deserialization.</li><li>Clients can call server methods on remote machines as if they were local.</li></ul><blockquote><p>RPC != gRPC. gRPC is a specific implementation of RPC, using HTTP/2 and Protocol Buffers internally.</p></blockquote><hr><h2 id=http11-vs-http2>HTTP/1.1 vs HTTP/2<a hidden class=anchor aria-hidden=true href=#http11-vs-http2>#</a></h2><h3 id=http11-flow>HTTP/1.1 Flow<a hidden class=anchor aria-hidden=true href=#http11-flow>#</a></h3><p><img loading=lazy src=/posts/grpc/image-3.png></p><ol><li>TCP handshake</li><li>Request/response</li><li>TCP termination</li></ol><p>Even with Keep-Alive, HTTP/1.1 can only handle one request per connection (sequentially).</p><h4 id=problems>Problems<a hidden class=anchor aria-hidden=true href=#problems>#</a></h4><ul><li><strong>Overhead</strong> from many TCP connections</li><li><strong>HOL Blocking</strong>: one slow request blocks the rest</li></ul><h3 id=http2-improvements>HTTP/2 Improvements<a hidden class=anchor aria-hidden=true href=#http2-improvements>#</a></h3><h4 id=proxy--keep-alive-problems>Proxy + Keep-Alive Problems<a hidden class=anchor aria-hidden=true href=#proxy--keep-alive-problems>#</a></h4><p><img loading=lazy src=/posts/grpc/image-4.png></p><ul><li>Proxies may drop Keep-Alive connections without notifying clients.</li><li>Clients think the connection is still valid, leading to errors.</li></ul><h4 id=http2-fixes>HTTP/2 Fixes<a hidden class=anchor aria-hidden=true href=#http2-fixes>#</a></h4><p><img loading=lazy src=/posts/grpc/image-7.png></p><ul><li>Servers send <code>GOAWAY</code> frames to indicate shutdown</li><li>Proxies send <code>PING</code> to verify liveness</li><li>Clients reconnect when needed</li></ul><h4 id=multiplexing>Multiplexing<a hidden class=anchor aria-hidden=true href=#multiplexing>#</a></h4><p><img loading=lazy src=/posts/grpc/image-8.png></p><ul><li>Multiple requests over a single TCP connection</li><li>Requests are independent and don’t block each other</li></ul><h4 id=no-more-hol-blocking>No More HOL Blocking<a hidden class=anchor aria-hidden=true href=#no-more-hol-blocking>#</a></h4><p><img loading=lazy src=/posts/grpc/image-5.png></p><hr><h2 id=advantages-and-disadvantages-of-grpc>Advantages and Disadvantages of gRPC<a hidden class=anchor aria-hidden=true href=#advantages-and-disadvantages-of-grpc>#</a></h2><table><thead><tr><th>Feature</th><th>Pros</th><th>Cons</th></tr></thead><tbody><tr><td>Performance</td><td>Multiplexing, header compression, streaming</td><td>Requires HTTP/2 support</td></tr><tr><td>IDL</td><td>Strong typing with <code>.proto</code> files</td><td>ProtoBuf is not human-readable</td></tr><tr><td>Communication</td><td>Unary, Server/Client Streaming, Bidirectional</td><td>Complex to debug</td></tr><tr><td>Language Support</td><td>Multi-language support (Go, Java, Python, etc.)</td><td>Varies in maturity</td></tr><tr><td>Code Generation</td><td>Auto-generates stubs from <code>.proto</code></td><td>Requires additional build tooling</td></tr><tr><td>Security</td><td>Strong TLS support</td><td>TLS setup can be tricky</td></tr><tr><td>Load Balancing</td><td>Client-side support available</td><td>Typically used with Envoy or other proxies</td></tr><tr><td>Streaming</td><td>Built-in streaming APIs</td><td>Harder to implement and maintain</td></tr><tr><td>Transport</td><td>Binary serialization = compact, fast</td><td>Not easily debuggable like REST</td></tr><tr><td>Browser</td><td>Supported via gRPC-Web</td><td>Requires gRPC-Web proxy layer</td></tr></tbody></table><hr><p>More on gRPC performance, debugging, and implementation tips coming next.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://dingyu.dev/tags/grpc/>Grpc</a></li><li><a href=https://dingyu.dev/tags/rpc/>Rpc</a></li><li><a href=https://dingyu.dev/tags/protobuf/>Protobuf</a></li><li><a href=https://dingyu.dev/tags/http2.0/>HTTP2.0</a></li></ul><nav class=paginav><a class=prev href=https://dingyu.dev/posts/schema-registry/><span class=title>« Prev</span><br><span>[EDA] Schema Registry</span>
</a><a class=next href=https://dingyu.dev/posts/go-convention/><span class=title>Next »</span><br><span>[Go] Go Convention</span></a></nav></footer><div id=giscus_thread><script src=https://giscus.app/client.js data-repo=dings-things/blog data-repo-id=R_kgDON9IuAw data-category=Announcements data-category-id=DIC_kwDON9IuA84CnTai data-mapping=og:title data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=preferred_color_scheme data-lang=ko data-loading=lazy crossorigin=anonymous async></script></div></article></main><footer class=footer><span>&copy; 2025 <a href=https://dingyu.dev/>Ding's Coding Forge</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>